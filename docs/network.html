<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-10-21 Wed 21:57 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="adam" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8ba06b3">1. Computer Networks and the Internet</a>
<ul>
<li><a href="#org7c6c06e">1.1. Internet overview</a>
<ul>
<li><a href="#orgd6e1d82">1.1.1. Devices</a></li>
<li><a href="#orgc195313">1.1.2. Communication Links</a></li>
<li><a href="#org6836691">1.1.3. Packet switches</a></li>
</ul>
</li>
<li><a href="#org176002d">1.2. Service view of the internet</a>
<ul>
<li><a href="#orga405ef9">1.2.1. Provider of services to apps</a></li>
<li><a href="#orge9f85b6">1.2.2. Programming interface to apps</a></li>
</ul>
</li>
<li><a href="#org5b5f2bd">1.3. Protocols</a>
<ul>
<li><a href="#org52f0bf0">1.3.1. Definition</a></li>
<li><a href="#orga0c004f">1.3.2. Required</a></li>
</ul>
</li>
<li><a href="#org9233d1b">1.4. Network edge</a>
<ul>
<li><a href="#org424b331">1.4.1. Access networks</a></li>
<li><a href="#orgf2c3573">1.4.2. Physical media</a></li>
</ul>
</li>
<li><a href="#org2ac7d7f">1.5. Network core</a>
<ul>
<li><a href="#org11beab4">1.5.1. Interconnected routers</a></li>
<li><a href="#org8ce8a26">1.5.2. Delay, loss and throughput in Packet switched networks</a></li>
<li><a href="#orged636bd">1.5.3. Queuing, delay, loss</a></li>
<li><a href="#org014ce37">1.5.4. Sources of delay</a></li>
<li><a href="#org7c151ce">1.5.5. Packet loss</a></li>
</ul>
</li>
<li><a href="#org73f4725">1.6. Protocol Layers</a>
<ul>
<li><a href="#org862e4fa">1.6.1. iso/osi Reference Model</a></li>
</ul>
</li>
<li><a href="#org5c1d335">1.7. Network Security</a>
<ul>
<li><a href="#orgd9f7cb1">1.7.1. Malware</a></li>
<li><a href="#orgac438c9">1.7.2. Packet "sniffing" &amp; IP Spoofing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcdc6462">2. Application layer</a>
<ul>
<li><a href="#orgd34c160">2.1. Web and HTTP</a>
<ul>
<li><a href="#org6ff7dea">2.1.1. Client-Server Architecture</a></li>
<li><a href="#org596621e">2.1.2. Process Communicating</a></li>
<li><a href="#orgf783789">2.1.3. Process</a></li>
<li><a href="#org4c6eb4e">2.1.4. Sockets</a></li>
<li><a href="#orgebe6f1b">2.1.5. Protocols</a></li>
<li><a href="#orgdc3437a">2.1.6. HTTP</a></li>
<li><a href="#orgaad228c">2.1.7. User-server state: Cookies</a></li>
<li><a href="#orgc6e77b0">2.1.8. Web caches (proxy server)</a></li>
<li><a href="#org33dec04">2.1.9. conditional GET</a></li>
</ul>
</li>
<li><a href="#org13d1bb2">2.2. FTP</a></li>
<li><a href="#orgf23d5eb">2.3. Electronic mail: SMTP, POP3, IMAP</a>
<ul>
<li><a href="#org9737b99">2.3.1. POP3</a></li>
<li><a href="#org54cc2de">2.3.2. IMAP</a></li>
</ul>
</li>
<li><a href="#org765b363">2.4. DNS</a>
<ul>
<li><a href="#orga2ef821">2.4.1. DNS Services</a></li>
<li><a href="#org220dbb9">2.4.2. DNS Records</a></li>
<li><a href="#orgeb06ed6">2.4.3. Attacking DNS</a></li>
</ul>
</li>
<li><a href="#org1a6c7f2">2.5. Principles of network applications</a>
<ul>
<li><a href="#org260f99e">2.5.1. Server/client</a></li>
<li><a href="#org15a2304">2.5.2. P2P</a></li>
</ul>
</li>
<li><a href="#orgfcf0f46">2.6. P2P Apps</a></li>
</ul>
</li>
<li><a href="#org158c126">3. Transport Layer</a>
<ul>
<li><a href="#org8eb7f0f">3.1. Transport Services &amp; Protocols</a></li>
<li><a href="#org0e59527">3.2. Multiplexing and Demultiplexing</a>
<ul>
<li><a href="#org0261b9d">3.2.1. Port</a></li>
<li><a href="#org9ed6851">3.2.2. Socket</a></li>
</ul>
</li>
<li><a href="#orge0d6381">3.3. Demultiplexing</a>
<ul>
<li><a href="#org9d192e3">3.3.1. Connection-less Dmuxing</a></li>
<li><a href="#orgdcf836b">3.3.2. Connection-oriented Dmux</a></li>
</ul>
</li>
<li><a href="#org2b19a33">3.4. Connection-less Transport UDP</a>
<ul>
<li><a href="#org42ff1ef">3.4.1. Why UDP?</a></li>
</ul>
</li>
<li><a href="#orgfd004ca">3.5. Principles of Reliable Data Transfer</a>
<ul>
<li><a href="#orgcd75d82">3.5.1. RDT: Getting Started</a></li>
<li><a href="#org5eb9342">3.5.2. Dependency between event &amp; state</a></li>
<li><a href="#org0e6bf04">3.5.3. RDT 1.0</a></li>
<li><a href="#org6a83193">3.5.4. RDT 2.0</a></li>
<li><a href="#org535098b">3.5.5. RDT 2.1</a></li>
<li><a href="#org8c07d77">3.5.6. RDT 2.2: A NAK-free protocol</a></li>
<li><a href="#orga7c8c61">3.5.7. RDT 3.0: Channels with errors and loss</a></li>
</ul>
</li>
<li><a href="#org9c9acc1">3.6. Pipelined Protocols</a>
<ul>
<li><a href="#orgc5a47c4">3.6.1. Got-back-N</a></li>
<li><a href="#org8ad88d8">3.6.2. Selective repeat</a></li>
</ul>
</li>
<li><a href="#org72eca81">3.7. TCP</a>
<ul>
<li><a href="#org778ffc5">3.7.1. Overview</a></li>
<li><a href="#org4e11ab1">3.7.2. TCP seq Number Acks</a></li>
<li><a href="#orgff85374">3.7.3. Round Trip Time, Timeout</a></li>
<li><a href="#org12003d8">3.7.4. Re-transmission</a></li>
<li><a href="#org2af0000">3.7.5. Flow Control</a></li>
<li><a href="#org2b22e7a">3.7.6. Connection Management</a></li>
<li><a href="#orgbf692df">3.7.7. Principles of Congestion Control</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfc47ffc">4. Network Layer</a>
<ul>
<li><a href="#orgba55a16">4.1. Data Plane</a>
<ul>
<li><a href="#org911ac6e">4.1.1. Forwarding</a></li>
<li><a href="#org5445232">4.1.2. Routing</a></li>
</ul>
</li>
<li><a href="#org45a8408">4.2. Control Plane</a></li>
<li><a href="#org01fe0ee">4.3. Network Services Model</a>
<ul>
<li><a href="#org0d10277">4.3.1. Possible service provisions</a></li>
</ul>
</li>
<li><a href="#org99fb0b9">4.4. Virtual circuit &amp; datagram Network</a>
<ul>
<li><a href="#orgad2e40b">4.4.1. Virtual circuits</a></li>
<li><a href="#org50bbb91">4.4.2. Datagram forwarding table</a></li>
</ul>
</li>
<li><a href="#orgebfc188">4.5. Internet (datagram)</a></li>
<li><a href="#org238ac89">4.6. ATM (VC)</a></li>
<li><a href="#org7b4f84f">4.7. Router Architecture Overview</a>
<ul>
<li><a href="#orgf0dc5ad">4.7.1. Input port functions</a></li>
<li><a href="#org20dd4c7">4.7.2. Head-of-the-line (HOC) blocking</a></li>
<li><a href="#org2e30ed6">4.7.3. Switching Fabric</a></li>
<li><a href="#orgcc94977">4.7.4. Output Ports</a></li>
</ul>
</li>
<li><a href="#orgd30a082">4.8. IP Layer Protocol</a></li>
<li><a href="#org85164f4">4.9. IP Fragmentation, Reassembly</a></li>
<li><a href="#org28c21fd">4.10. IP Addressing</a></li>
<li><a href="#org867730d">4.11. Subnets</a>
<ul>
<li><a href="#org841cdb2">4.11.1. Bit distribution and max num Computers</a></li>
<li><a href="#orgba16c3c">4.11.2. CIDR (RFC 1918)</a></li>
</ul>
</li>
<li><a href="#orgc68570b">4.12. How to get IP</a>
<ul>
<li><a href="#org92eefea">4.12.1. Host</a></li>
<li><a href="#orgaee1bdb">4.12.2. Network</a></li>
</ul>
</li>
<li><a href="#orgb3b8560">4.13. NAT: Network Address Translation</a></li>
<li><a href="#orgff38a51">4.14. Routing Algorithms</a>
<ul>
<li><a href="#org03cf7ac">4.14.1. Graph Abstraction</a></li>
<li><a href="#org3d9b460">4.14.2. Routing Algorithm Classification</a></li>
<li><a href="#org79f84d0">4.14.3. Link State: Dijkstra's Algorithm</a></li>
<li><a href="#org129a89d">4.14.4. Bellman-Ford (Distance Vector Algorithm)</a></li>
<li><a href="#orga6f3ea1">4.14.5. Comparison of LS &amp; DV Algorithms</a></li>
</ul>
</li>
<li><a href="#org2a69215">4.15. Routing in the Internet</a>
<ul>
<li><a href="#org3dd3fc9">4.15.1. Autonomous systems</a></li>
<li><a href="#orgd216793">4.15.2. Intra-AS routing</a></li>
<li><a href="#orgbbc5b72">4.15.3. RIP (Routing Information Protocol)</a></li>
<li><a href="#org7dca703">4.15.4. Open Shortest Path First</a></li>
<li><a href="#orgbb229d7">4.15.5. Hierarchical OSPF</a></li>
<li><a href="#org055d5b6">4.15.6. Border Gateway Protocol (BGP)</a></li>
<li><a href="#org99e908a">4.15.7. Why different routing?</a></li>
<li><a href="#org7fff030">4.15.8. Broadcast &amp; Multitask routing</a></li>
<li><a href="#org6e5c824">4.15.9. Multicast routing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org8ba06b3" class="outline-2">
<h2 id="org8ba06b3"><span class="section-number-2">1</span> Computer Networks and the Internet</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7c6c06e" class="outline-3">
<h3 id="org7c6c06e"><span class="section-number-3">1.1</span> Internet overview</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-orgd6e1d82" class="outline-4">
<h4 id="orgd6e1d82"><span class="section-number-4">1.1.1</span> Devices</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>host = end system, runs apps</li>
</ul>
</div>
</div>

<div id="outline-container-orgc195313" class="outline-4">
<h4 id="orgc195313"><span class="section-number-4">1.1.2</span> Communication Links</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>fiber, copper, radio, satellite</li>
</ul>
</div>
</div>

<div id="outline-container-org6836691" class="outline-4">
<h4 id="org6836691"><span class="section-number-4">1.1.3</span> Packet switches</h4>
<div class="outline-text-4" id="text-1-1-3">
<ul class="org-ul">
<li>routers and switches</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org176002d" class="outline-3">
<h3 id="org176002d"><span class="section-number-3">1.2</span> Service view of the internet</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-orga405ef9" class="outline-4">
<h4 id="orga405ef9"><span class="section-number-4">1.2.1</span> Provider of services to apps</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>Web, VoIP, email, games, eCommerce, social net</li>
</ul>
</div>
</div>

<div id="outline-container-orge9f85b6" class="outline-4">
<h4 id="orge9f85b6"><span class="section-number-4">1.2.2</span> Programming interface to apps</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>hooks</li>
<li>service options (postal)</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org5b5f2bd" class="outline-3">
<h3 id="org5b5f2bd"><span class="section-number-3">1.3</span> Protocols</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org52f0bf0" class="outline-4">
<h4 id="org52f0bf0"><span class="section-number-4">1.3.1</span> Definition</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
A protocol defines the format and the order of messages exchanged
between two or more communicating entitites, as well as the actions
taken on the transmission and/or receipt of a message or other event.
</p>
</div>
</div>

<div id="outline-container-orga0c004f" class="outline-4">
<h4 id="orga0c004f"><span class="section-number-4">1.3.2</span> Required</h4>
<div class="outline-text-4" id="text-1-3-2">
<ul class="org-ul">
<li>format</li>
<li>order of messages</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org9233d1b" class="outline-3">
<h3 id="org9233d1b"><span class="section-number-3">1.4</span> Network edge</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org424b331" class="outline-4">
<h4 id="org424b331"><span class="section-number-4">1.4.1</span> Access networks</h4>
<div class="outline-text-4" id="text-1-4-1">
<ul class="org-ul">
<li>Wired, wireless comms links</li>
</ul>
<p>
How does one connect an edge to a router?
</p>

<ul class="org-ul">
<li>Frequency division multiplexing</li>
<li>Cable network is shared</li>
<li>HFC: hybrid fiber coax</li>
<li>fiber homes -&gt; ISP router</li>
<li>DSL</li>
<li>Ethernet</li>

<li>WLAN: IEEE<sub>802.11</sub></li>
</ul>
</div>
</div>

<div id="outline-container-orgf2c3573" class="outline-4">
<h4 id="orgf2c3573"><span class="section-number-4">1.4.2</span> Physical media</h4>
<div class="outline-text-4" id="text-1-4-2">
<ul class="org-ul">
<li>Guided (wires)</li>
<li>Unguided (radio)</li>
<li>Physical link (transmitter, {$x}, receiver)</li>
<li>Bit (propagates between)</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org2ac7d7f" class="outline-3">
<h3 id="org2ac7d7f"><span class="section-number-3">1.5</span> Network core</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-org11beab4" class="outline-4">
<h4 id="org11beab4"><span class="section-number-4">1.5.1</span> Interconnected routers</h4>
<div class="outline-text-4" id="text-1-5-1">
<ul class="org-ul">
<li>mesh of interconnected routing packets transmitted at full link
capacity</li>
</ul>
</div>
</div>

<div id="outline-container-org8ce8a26" class="outline-4">
<h4 id="org8ce8a26"><span class="section-number-4">1.5.2</span> Delay, loss and throughput in Packet switched networks</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li>store and forward</li>
</ul>


<div class="org-src-container">
<pre class="src src-artist">
 Source     Router    Destination
|       |____________|       |
|_______|            |_______|

   R_bps               R_bps
</pre>
</div>

<p>
L bits per packet
</p>

<ul class="org-ul">
<li>End to end delay (assumes zero propagation delay) = 2L / R</li>
</ul>
</div>
</div>

<div id="outline-container-orged636bd" class="outline-4">
<h4 id="orged636bd"><span class="section-number-4">1.5.3</span> Queuing, delay, loss</h4>
<div class="outline-text-4" id="text-1-5-3">

<div class="figure">
<p><img src="my-diagram.png" alt="my-diagram.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org014ce37" class="outline-4">
<h4 id="org014ce37"><span class="section-number-4">1.5.4</span> Sources of delay</h4>
<div class="outline-text-4" id="text-1-5-4">
<ul class="org-ul">
<li>transmission</li>
<li>nodal processing</li>
<li>queuing</li>
</ul>


<div class="figure">
<p><img src="../img/qDelay.png" alt="qDelay.png" />
</p>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">traffic intensity = L<sub>a</sub>/R</td>
<td class="org-right">Avg. queuing delay</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-right">8</td>
<td class="org-right">3</td>
</tr>

<tr>
<td class="org-right">16</td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-right">32</td>
<td class="org-right">5</td>
</tr>

<tr>
<td class="org-right">64</td>
<td class="org-right">6</td>
</tr>

<tr>
<td class="org-right">128</td>
<td class="org-right">7</td>
</tr>

<tr>
<td class="org-right">256</td>
<td class="org-right">8</td>
</tr>

<tr>
<td class="org-right">512</td>
<td class="org-right">9</td>
</tr>
</tbody>
</table>


<p>
L<sub>a</sub>/R ~ 0 : avg. q delay small
</p>

<p>
L<sub>a</sub>/R &lt;= 1 : avg. q delay large
</p>

<p>
L<sub>a</sub>/R &gt; 1 : more work arriving than can be serviced average delay
infinite
</p>
</div>
</div>

<div id="outline-container-org7c151ce" class="outline-4">
<h4 id="org7c151ce"><span class="section-number-4">1.5.5</span> Packet loss</h4>
<div class="outline-text-4" id="text-1-5-5">
<p>
Buffer has finite capacity 
</p>

<p>
packet &rarr; full queue = dropout
</p>
</div>
</div>
</div>


<div id="outline-container-org73f4725" class="outline-3">
<h3 id="org73f4725"><span class="section-number-3">1.6</span> Protocol Layers</h3>
<div class="outline-text-3" id="text-1-6">

<div class="figure">
<p><img src="networklayers.png" alt="networklayers.png" />
</p>
</div>
</div>

<div id="outline-container-org862e4fa" class="outline-4">
<h4 id="org862e4fa"><span class="section-number-4">1.6.1</span> iso/osi Reference Model</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Encapsulation 
</p>


<div class="org-src-container">
<pre class="src src-artist">
+-------------------+ A |   | A +-------------------+
|               M   |---+   |---+                M  |
|-------------------| T |   | T |-------------------|
|           H_t M   |---+   |---+            H_t M  |
|-------------------| N |   | N |-------------------|
|       H_n H_t M   |---+   |---+        H_n H_t M  |
|-------------------| L |   | L |-------------------|
|    H_l H_n H_t M  |---+   |---+     H_l H_n H_t M |
|-------------------| P |   | P |-------------------|

</pre>
</div>

<p>
Source &rarr;     Switch &rarr;      Router &rarr;     Destination 
</p>
</div>
</div>
</div>


<div id="outline-container-org5c1d335" class="outline-3">
<h3 id="org5c1d335"><span class="section-number-3">1.7</span> Network Security</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Internet was originally designed to be used be mutual trusting users
attached to a transparent network.
</p>
</div>

<div id="outline-container-orgd9f7cb1" class="outline-4">
<h4 id="orgd9f7cb1"><span class="section-number-4">1.7.1</span> Malware</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li><b>Virus</b>: self-replicating infection by receiving/executing object
(email attachment)</li>
<li><b>Worm</b>: self-replicating infection by passively receiving object
that gets itself executed</li>
<li><b>Spyware</b>: record keystrokes, web sites visited, upload info to</li>
</ul>

<p>
Infected host can be enrolled in botnet, used for spam. DDOS attacks.
</p>

<ul class="org-ul">
<li><b>DDOS attacks</b>: make resources unavailable to legitimate traffic by
overwhelming with bogus traffic</li>
</ul>
</div>
</div>

<div id="outline-container-orgac438c9" class="outline-4">
<h4 id="orgac438c9"><span class="section-number-4">1.7.2</span> Packet "sniffing" &amp; IP Spoofing</h4>
<div class="outline-text-4" id="text-1-7-2">
<ul class="org-ul">
<li>Broadcast media</li>
<li>Promiscuous network interface reads/records all packets passing by</li>
<li>Send packet with false source address</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-orgcdc6462" class="outline-2">
<h2 id="orgcdc6462"><span class="section-number-2">2</span> Application layer</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgd34c160" class="outline-3">
<h3 id="orgd34c160"><span class="section-number-3">2.1</span> Web and HTTP</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org6ff7dea" class="outline-4">
<h4 id="org6ff7dea"><span class="section-number-4">2.1.1</span> Client-Server Architecture</h4>
<div class="outline-text-4" id="text-2-1-1">

<div class="figure">
<p><img src="clientserver.png" alt="clientserver.png" />
</p>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>Client</b></th>
<th scope="col" class="org-left"><b>Server</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Communicates with server</td>
<td class="org-left">Always on host</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">May be intermittently connected</td>
<td class="org-left">Permanent IP</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">May have dynamic IP</td>
<td class="org-left">Data centers for scaling</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Do not communicate directly with each other</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org596621e" class="outline-4">
<h4 id="org596621e"><span class="section-number-4">2.1.2</span> Process Communicating</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
Client process initiates comms, server process waits for contact
</p>
</div>
</div>

<div id="outline-container-orgf783789" class="outline-4">
<h4 id="orgf783789"><span class="section-number-4">2.1.3</span> Process</h4>
<div class="outline-text-4" id="text-2-1-3">
<ul class="org-ul">
<li>Running within a host</li>
<li>Withing same host, two processes communicating using inter-process
communication (defined by OS)</li>
<li>Processes in different hosts communicated by exchanging messages</li>
</ul>
</div>
</div>

<div id="outline-container-org4c6eb4e" class="outline-4">
<h4 id="org4c6eb4e"><span class="section-number-4">2.1.4</span> Sockets</h4>
<div class="outline-text-4" id="text-2-1-4">
<div class="org-src-container">
<pre class="src src-artist">
    V                  ^
+---v-----+        +---^-----+  
|_V_V_V_V_|        |_V_V_V_V_|

</pre>
</div>

<p>
<b>Addressing Processes</b>
</p>
<ul class="org-ul">
<li>to receive messages, process must have ID</li>
<li>IP = 32 bit</li>
<li>identified = IP + Port</li>
<li>HTTP server: 80</li>
<li>Mail server: 25</li>
</ul>

<p>
<b>Application Layer Protocol</b>
</p>

<p>
Defines:
</p>
<ul class="org-ul">
<li>types of messages exchanged (eg: request, response)</li>
<li>msg syntax (fields and delineation)</li>
<li>msg semantics</li>
</ul>
</div>
</div>

<div id="outline-container-orgebe6f1b" class="outline-4">
<h4 id="orgebe6f1b"><span class="section-number-4">2.1.5</span> Protocols</h4>
<div class="outline-text-4" id="text-2-1-5">
<p>
Open protocols:
</p>
<ul class="org-ul">
<li>defined in RFC</li>
<li>allows for interoperability</li>
<li>eg: http, smtp</li>
</ul>

<p>
Proprietary protocols:
</p>
<ul class="org-ul">
<li>eg. Skype</li>
</ul>

<p>
Transport service for an app
</p>
<ul class="org-ul">
<li>100% reliable?</li>
<li>can tolerate loss</li>
<li>low latency</li>
<li>multimedia, minimum throughput</li>
<li>"elastic apps" whatever throughput</li>
<li>encryption data integration</li>
</ul>

<p>
Different apps need different architecture to accommodate all user
requirements
</p>

<p>
<b>TCP (Transmission Control Protocol)</b>
</p>
<ul class="org-ul">
<li>Reliable transport send &rarr; receive</li>
<li>Flow control (doesn't overwhelm receiver)</li>
<li>Congestion control (throttle sender when network overloaded)</li>
<li>Does not provide: timing, minimum throughput guarantee</li>
<li>Connection oriented: setup required between client &amp; server process</li>
</ul>

<p>
<b>UDP (User datagram Protocol)</b>
</p>
<ul class="org-ul">
<li>unreliable data transfer between sending and receiving</li>
<li>does not provide: reliability, flow control, congestion control,
timing, throughput guarantee, security, or connection setup</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left"><b>App</b></th>
<th scope="col" class="org-left"><b>App layer protocol</b></th>
<th scope="col" class="org-left"><b>underlying transport protocol</b></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">email</td>
<td class="org-left">SMTP [RFC 2821]</td>
<td class="org-left">TCP</td>
</tr>

<tr>
<td class="org-left">remote terminal access</td>
<td class="org-left">Telnet [RFC 854]</td>
<td class="org-left">TCP</td>
</tr>

<tr>
<td class="org-left">web</td>
<td class="org-left">HTTP [RFC 2616]</td>
<td class="org-left">TCP</td>
</tr>

<tr>
<td class="org-left">file transfer</td>
<td class="org-left">FTP [RFC 959]</td>
<td class="org-left">TCP</td>
</tr>

<tr>
<td class="org-left">streaming</td>
<td class="org-left">http [rtp 1889]</td>
<td class="org-left">TCP or UDP</td>
</tr>

<tr>
<td class="org-left">VoIP</td>
<td class="org-left">SIP, RTP, proprietary</td>
<td class="org-left">TCP or UDP</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdc3437a" class="outline-4">
<h4 id="orgdc3437a"><span class="section-number-4">2.1.6</span> HTTP</h4>
<div class="outline-text-4" id="text-2-1-6">
<p>
HTTP is a stateless protocol, server maintains no info about previous
client requests
<b>uses TCP</b>
</p>
<ul class="org-ul">
<li>client initiates</li>
<li>server accepts</li>
<li>http messages (application-layer protocol messages) exchanged
between browser (http client) and web server (http server)</li>
<li>TCP connection closed</li>
</ul>

<p>
<b>non-persistent</b>
</p>
<ul class="org-ul">
<li>At most one object sent over TCP connection</li>
<li>connection then closed</li>
<li>downloading multiple objects required multiple connections</li>
</ul>

<p>
<b>persistent</b>
</p>
<ul class="org-ul">
<li>multiple objects can be sent over single TCP connection between
client, server</li>
</ul>


<div class="figure">
<p><img src="http.png" alt="http.png" />
</p>
</div>


<div class="figure">
<p><img src="../img/http.png" alt="http.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgaad228c" class="outline-4">
<h4 id="orgaad228c"><span class="section-number-4">2.1.7</span> User-server state: Cookies</h4>
<div class="outline-text-4" id="text-2-1-7">
<p>
Four components:
</p>
<ol class="org-ol">
<li>Cookie header line of http response message</li>
<li>cookie header line in next http request message</li>
<li>cookie file kept on user's host, managed by browser</li>
<li>back-end database at website</li>
</ol>

<p>
<b>uses</b>
</p>
<ul class="org-ul">
<li>authentication</li>
<li>shop cart</li>
<li>recommend</li>
<li>user session state (web-mail)</li>
</ul>

<p>
<b>cookies and privacy</b>
</p>
<ul class="org-ul">
<li>permit site to learn about users</li>
</ul>
</div>
</div>

<div id="outline-container-orgc6e77b0" class="outline-4">
<h4 id="orgc6e77b0"><span class="section-number-4">2.1.8</span> Web caches (proxy server)</h4>
<div class="outline-text-4" id="text-2-1-8">
<ul class="org-ul">
<li>acts as both client and server</li>
<li>typically installed by ISP (uni, company, residential)</li>
<li>reduce response time</li>
<li>reduce traffic on access link</li>
</ul>
</div>
</div>

<div id="outline-container-org33dec04" class="outline-4">
<h4 id="org33dec04"><span class="section-number-4">2.1.9</span> conditional GET</h4>
<div class="outline-text-4" id="text-2-1-9">
<ul class="org-ul">
<li><b>goal</b>: don't send object if cache has up to date cached version</li>
<li><b>cache</b>: specify date of cached copy in http request</li>
<li><b>server</b>: response contains no object if cached copy up to date</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org13d1bb2" class="outline-3">
<h3 id="org13d1bb2"><span class="section-number-3">2.2</span> FTP</h3>
<div class="outline-text-3" id="text-2-2">
<p>
File Transfer Protocol 
</p>

<ul class="org-ul">
<li>to/from remote host</li>
<li>client/server model
<ul class="org-ul">
<li>initiated by client</li>
<li>server: remote host</li>
</ul></li>
<li>Ftp: RFC 959</li>
<li>Ftp server: port 21</li>
</ul>
</div>
</div>

<div id="outline-container-orgf23d5eb" class="outline-3">
<h3 id="orgf23d5eb"><span class="section-number-3">2.3</span> Electronic mail: SMTP, POP3, IMAP</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>User agent</li>
<li>mail server</li>
<li>SMTP</li>
</ul>

<p>
<b>Uses TCP on port 25</b>
Three phases:
</p>
<ul class="org-ul">
<li>handshaking</li>
<li>Transfer</li>
<li>closure</li>
</ul>
</div>

<div id="outline-container-org9737b99" class="outline-4">
<h4 id="org9737b99"><span class="section-number-4">2.3.1</span> POP3</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li>download &amp; delete</li>
<li>cannot re-read file after client change</li>
<li>stateless across sessions</li>
<li>download-and-keep copies and different clients</li>
</ul>
</div>
</div>

<div id="outline-container-org54cc2de" class="outline-4">
<h4 id="org54cc2de"><span class="section-number-4">2.3.2</span> IMAP</h4>
<div class="outline-text-4" id="text-2-3-2">
<ul class="org-ul">
<li>keeps messages in one place:server</li>
<li>allows user to organize messages in folders</li>
<li>keeps user state across sessions:
<ul class="org-ul">
<li>names of folders and mappings between message IDs and folder name</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org765b363" class="outline-3">
<h3 id="org765b363"><span class="section-number-3">2.4</span> DNS</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Domain Name System
</p>

<ul class="org-ul">
<li>Names map IP to readable format</li>
<li>Distributed database implemented in hierarchy of many name servers</li>
<li>application-layer protocol: hosts, name servers communicate to
resolve names (address/name translation)
<ul class="org-ul">
<li>Note: core Internet function implemented as application-layer
protocol complexity at network's edge</li>
</ul></li>

<li><b>Root DNS Servers</b> over 400 worldwide (2016 numbers)</li>
<li><b>Top-level domain (TLD) servers</b> for each of {com, org, ned, edu,
gov, ie, at, jp, etc) there is a server or server cluster</li>
<li><b>Authoritative DNS servers</b> publicly accessible records that map the
names of the host companies to IP addresses</li>
</ul>
</div>


<div id="outline-container-orga2ef821" class="outline-4">
<h4 id="orga2ef821"><span class="section-number-4">2.4.1</span> DNS Services</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>Host-name to IP address translation</li>
<li>host aliasing
<ul class="org-ul">
<li>canonical alias names</li>
</ul></li>
<li>mail server aliasing</li>
<li>load distribution 
<ul class="org-ul">
<li>replicated web servers: many IP addresses correspond to one name</li>
</ul></li>
</ul>

<p>
<b>Why not centralize DNS?</b>
</p>
<ul class="org-ul">
<li>single point of failure</li>
<li>traffic volume</li>
<li>distant centralized database</li>
<li>maintenance</li>
<li>doesn't scale</li>
</ul>
</div>
</div>

<div id="outline-container-org220dbb9" class="outline-4">
<h4 id="org220dbb9"><span class="section-number-4">2.4.2</span> DNS Records</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
DNS: distributed db storing resource records (RR) 
</p>

<p>
RR Format: (name, value, type, ttl)
</p>

<p>
<b>type=A</b>
</p>
<ul class="org-ul">
<li>name is host-name</li>
<li>value is IP</li>
</ul>

<p>
<b>type=NS</b>
</p>
<ul class="org-ul">
<li>name is domain</li>
<li>value is host-name of authoritative name server for this domain</li>
</ul>

<p>
<b>type=CNAME</b>
</p>
<ul class="org-ul">
<li>name is alias for some "canonical" real name</li>
<li>www.ibm.com
<ul class="org-ul">
<li>servereast.backup2.ibm.com</li>
<li>value is canonical name</li>
</ul></li>
</ul>

<p>
<b>type=MX</b>
</p>
<ul class="org-ul">
<li>value is name of mail server associated with name</li>
</ul>
</div>
</div>


<div id="outline-container-orgeb06ed6" class="outline-4">
<h4 id="orgeb06ed6"><span class="section-number-4">2.4.3</span> Attacking DNS</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
<b>DDoS attacks</b>
</p>
<ul class="org-ul">
<li>Bombard servers with traffic
<ul class="org-ul">
<li>Not successful to date</li>
<li>traffic filtered</li>
<li>local DNS servers cache IPs of TLD servers, allowing root server
bypass</li>
</ul></li>
<li>Bombard TLD (top level domain) servers
<ul class="org-ul">
<li>potentially more dangerous</li>
</ul></li>
</ul>

<p>
<b>Redirect attacks</b>
</p>
<ul class="org-ul">
<li>man in the middle attacks
<ul class="org-ul">
<li>intercept queries</li>
</ul></li>
<li>DNS poisoning
<ul class="org-ul">
<li>send bogus replies to DNS server, which caches</li>
</ul></li>
</ul>

<p>
<b>Exploit DNS for DDoS</b>
</p>
<ul class="org-ul">
<li>send queries with spoofed source address: target IP</li>
<li>requires amplification</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1a6c7f2" class="outline-3">
<h3 id="org1a6c7f2"><span class="section-number-3">2.5</span> Principles of network applications</h3>
<div class="outline-text-3" id="text-2-5">
</div>
<div id="outline-container-org260f99e" class="outline-4">
<h4 id="org260f99e"><span class="section-number-4">2.5.1</span> Server/client</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>send one copy F/u<sub>S</sub></li>
<li>send N copes NF/u<sub>s</sub></li>
</ul>

<p>
Client must download file copy
</p>
<ul class="org-ul">
<li>d<sub>min</sub> = min client dl rate</li>
<li>min client download time: F/d<sub>min</sub></li>
</ul>

<p>
<b>Distribution time</b>
</p>

<p>
D<sub>c</sub>-s &gt; mac{NF/u<sub>s</sub> , F/d<sub>min</sub>}
</p>
</div>
</div>

<div id="outline-container-org15a2304" class="outline-4">
<h4 id="org15a2304"><span class="section-number-4">2.5.2</span> P2P</h4>
<div class="outline-text-4" id="text-2-5-2">
<p>
Max upload rate:  u<sub>s</sub> + &Sigma; u<sub>i</sub>
</p>

<p>
distribution time (<i>increases linearly in N</i>):
</p>

<p>
D<sub>p2p</sub> &gt; max { F/u<sub>s</sub>, F/d<sub>min</sub>, NF/(u<sub>s</sub> + &Sigma; u<sub>i</sub>) }
</p>
</div>
</div>
</div>





<div id="outline-container-orgfcf0f46" class="outline-3">
<h3 id="orgfcf0f46"><span class="section-number-3">2.6</span> P2P Apps</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Commonly used to distribute software
</p>

<p>
Distributed hash table (DHT)
</p>

<p>
DHT: a distributed P2P database
</p>
</div>
</div>
</div>


<div id="outline-container-org158c126" class="outline-2">
<h2 id="org158c126"><span class="section-number-2">3</span> Transport Layer</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8eb7f0f" class="outline-3">
<h3 id="org8eb7f0f"><span class="section-number-3">3.1</span> Transport Services &amp; Protocols</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Provide logical communication between app processes running on
different hosts</li>
<li>Transport protocols run in and systems
<ul class="org-ul">
<li>Send side: breaks app messages into segments, passes to network layer</li>
<li>receiver side: reassemble segments into messages, passes to app
layer</li>
</ul></li>
<li>More than one transport protocol available to apps
<ul class="org-ul">
<li>Internet: TCP &amp; UDP</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org0e59527" class="outline-3">
<h3 id="org0e59527"><span class="section-number-3">3.2</span> Multiplexing and Demultiplexing</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>Multiplexing at sender: handle data from multiple sockets, add
transport  header (later used for demultiplexing)</li>
<li>Demultiplexing at receiver: use header info to deliver received
segments to correct socket</li>
</ul>
</div>

<div id="outline-container-org0261b9d" class="outline-4">
<h4 id="org0261b9d"><span class="section-number-4">3.2.1</span> Port</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Simply a number used by a particular software to identify its data
coming from the internet
</p>
</div>
</div>

<div id="outline-container-org9ed6851" class="outline-4">
<h4 id="org9ed6851"><span class="section-number-4">3.2.2</span> Socket</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
IP Address + Port num. Used by another computer to send data to
software on a particular machine 
</p>
<ul class="org-ul">
<li>IP = Machine</li>
<li>Port = Software</li>
</ul>


<p>
\break
</p>
</div>
</div>
</div>

<div id="outline-container-orge0d6381" class="outline-3">
<h3 id="orge0d6381"><span class="section-number-3">3.3</span> Demultiplexing</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>Host receives IP datagrams
<ul class="org-ul">
<li>Each datagram has source IP address, destination IP address</li>
<li>Each datagram carries one transport-layer segment</li>
</ul></li>
<li>Host uses IP address &amp; port numbers to direct segment to appropriate
socket</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>TCP/UDP segment format</label><pre class="src src-artist">
&lt;-----------32 bits---------&gt;
+-------------+-------------+
| src port #  | dest port # |
|_____________|_____________|
|                           |
|     other header fields   |
|___________________________|
|                           |
|       application data    |   
|       payload             |
|___________________________|

</pre>
</div>
</div>

<div id="outline-container-org9d192e3" class="outline-4">
<h4 id="org9d192e3"><span class="section-number-4">3.3.1</span> Connection-less Dmuxing</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
When host receives UDP segment:
</p>
<ul class="org-ul">
<li>checks destination port number in segment</li>
<li>directs UDP segment to socket with that port number</li>
</ul>

<p>
IP datagrams with some destination port number, but different source IP
and/or source port numbers will be directed to same socket at destination.
</p>
</div>
</div>

<div id="outline-container-orgdcf836b" class="outline-4">
<h4 id="orgdcf836b"><span class="section-number-4">3.3.2</span> Connection-oriented Dmux</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
TCP socket identified by 4-tuple:
</p>
<ul class="org-ul">
<li>Source IP address</li>
<li>Source port number</li>
<li>Destination IP address</li>
<li>Dest port number</li>
</ul>

<p>
Server host may support many simultaneous TCP sockets: each socket
identified by its own 4-tuple.Web servers have different sockets for
each connecting client, non persistent http will have different socket
for each request
</p>
</div>
</div>
</div>

<div id="outline-container-org2b19a33" class="outline-3">
<h3 id="org2b19a33"><span class="section-number-3">3.4</span> Connection-less Transport UDP</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li>No handshaking between UDP, sender, receiver</li>
<li>each UDP segment handled independently of others</li>
</ul>

<p>
UDP uses:
</p>
<ul class="org-ul">
<li>streaming multimedia apps (loss tolerant, rate sensitive)</li>
<li>DNS</li>
<li>best effort service</li>
</ul>

<p>
UDP segments may be
</p>
<ul class="org-ul">
<li>lost</li>
<li>delivered out-of-order to app</li>
</ul>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>UDP segment format</label><pre class="src src-artist">
&lt;-----------32 bits---------&gt;
+-------------+-------------+
| src port #  | dest port # |
|_____________|_____________|
| length      | checksum    |
|_____________|_____________|
|                           |
|     other header fields   |
|___________________________|
|                           |
|       application data    |   
|       payload             |
|___________________________|

</pre>
</div>
</div>

<div id="outline-container-org42ff1ef" class="outline-4">
<h4 id="org42ff1ef"><span class="section-number-4">3.4.1</span> Why UDP?</h4>
<div class="outline-text-4" id="text-3-4-1">
<ul class="org-ul">
<li>No connection establishment (which can add delay)</li>
<li>Simple: no connection state at sender, receiver</li>
<li>Small header size</li>
<li>No congestion control: UDP can blast away as fast as desired</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgfd004ca" class="outline-3">
<h3 id="orgfd004ca"><span class="section-number-3">3.5</span> Principles of Reliable Data Transfer</h3>
<div class="outline-text-3" id="text-3-5">

<div class="figure">
<p><img src="../img/RDT.png" alt="RDT.png" />
</p>
<p><span class="figure-number">Figure 7: </span>Reliable Data Transfer (RDT)</p>
</div>
</div>

<div id="outline-container-orgcd75d82" class="outline-4">
<h4 id="orgcd75d82"><span class="section-number-4">3.5.1</span> RDT: Getting Started</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
Relies on four functions
</p>

<pre class="example">

rdt_send()

deliver_data()

udt_send()

rdt_rcv()

</pre>
</div>
</div>


<div id="outline-container-org5eb9342" class="outline-4">
<h4 id="org5eb9342"><span class="section-number-4">3.5.2</span> Dependency between event &amp; state</h4>
<div class="outline-text-4" id="text-3-5-2">

<div class="figure">
<p><img src="../img/eventStateDependency.png" alt="eventStateDependency.png" />
</p>
<p><span class="figure-number">Figure 8: </span>Event -&gt;&lt;- State dependency</p>
</div>
</div>
</div>


<div id="outline-container-org0e6bf04" class="outline-4">
<h4 id="org0e6bf04"><span class="section-number-4">3.5.3</span> RDT 1.0</h4>
<div class="outline-text-4" id="text-3-5-3">
<p>
Reliable data transfer over a reliable channel. Underlying channel is
perfectly reliable
</p>
<ul class="org-ul">
<li>no bit errors</li>
<li>no loss of packets</li>
</ul>

<p>
Separate FSMs for sender, receiver:
</p>
<ul class="org-ul">
<li>sender sends data into underlying channel</li>
<li>receiver reads data from underlying channel</li>
</ul>

<p>
<b>a. rdt1.0 sending side</b>
</p>


<div class="figure">
<p><img src="rdt1.0senderFSM.png" alt="rdt1.0senderFSM.png" />
</p>
</div>

<p>
<b>b. rdt1.0: receiving side</b>
</p>

<div class="figure">
<p><img src="rdt1.0receiverFSM.png" alt="rdt1.0receiverFSM.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-org6a83193" class="outline-4">
<h4 id="org6a83193"><span class="section-number-4">3.5.4</span> RDT 2.0</h4>
<div class="outline-text-4" id="text-3-5-4">
<p>
Channel with bit errors: underlying channel may flip bits in packet
</p>
<ul class="org-ul">
<li>checksum to detect bit</li>
</ul>

<p>
<b>Question</b>: How to recover from errors?
</p>

<ul class="org-ul">
<li>Acknowledgements (ACKs): receiver explicitly tells sender that pkt
received OK</li>
<li>Negative acknowledgements (NAKs): receiver explicitly tells sender
that pkt had errors</li>
<li>Sender re-transmits pkt on receipt of NAK</li>
</ul>

<p>
<b>FATAL FLAW</b>
ACK/NAK can be corrupted
</p>
<ul class="org-ul">
<li>sender doesn't know what happened at receiver</li>
<li>can't just re-transmit possible duplicate</li>
</ul>

<p>
Handling duplicates:
</p>
<ul class="org-ul">
<li>Sender retransmits current pkt if ACK/NAK corrupted</li>
<li>Sender adds sequence number to each pkt</li>
<li>Receiver discards (doesn't deliver up) duplicate pkt</li>
</ul>

<p>
Stop and wait:
</p>
<ul class="org-ul">
<li>sender sends one packet, then waits for receiver to respond</li>
</ul>


<p>
<b>a. rdt2.0 sending side</b>
</p>


<div class="figure">
<p><img src="rdt2.0senderFSM.png" alt="rdt2.0senderFSM.png" />
</p>
</div>

<p>
<b>a. rdt2.0 receiving side</b>
</p>


<div class="figure">
<p><img src="rdt2.0receivingFSM.png" alt="rdt2.0receivingFSM.png" />
</p>
</div>
</div>
</div>




<div id="outline-container-org535098b" class="outline-4">
<h4 id="org535098b"><span class="section-number-4">3.5.5</span> RDT 2.1</h4>
<div class="outline-text-4" id="text-3-5-5">
<p>
Sender:
</p>
<ul class="org-ul">
<li>Seq number added to pkt</li>
<li>Two sequence numbers (0,1) will suffice</li>
<li>Must check if ACK/NAK corrupted</li>
<li>Twice as many states
<ul class="org-ul">
<li>states must "remember" whether "expected" pkt should have sequence
number of 0 or 1</li>
</ul></li>
</ul>

<p>
Receiver: 
</p>
<ul class="org-ul">
<li>Must check if received packet is duplicate
<ul class="org-ul">
<li>State indicates whether 0 or 1 expected pkt sequence number</li>
</ul></li>
</ul>

<p>
Note: receiver can not(!) know if its last ACK/NAK received okay at
sender 
</p>
</div>
</div>

<div id="outline-container-org8c07d77" class="outline-4">
<h4 id="org8c07d77"><span class="section-number-4">3.5.6</span> RDT 2.2: A NAK-free protocol</h4>
<div class="outline-text-4" id="text-3-5-6">
<p>
+Same functionality as <b>RDT 2.1</b>, using ACKs only 
</p>
<ul class="org-ul">
<li>Instead of NAK, receiver sends ACK for last pkt received OK
<ul class="org-ul">
<li>receiver must explicitly include sequence number of packet being
ACKed</li>
</ul></li>
<li>Duplicate ACK at sender results in same action as NAK: re-transmit
current pkt</li>
</ul>
</div>
</div>

<div id="outline-container-orga7c8c61" class="outline-4">
<h4 id="orga7c8c61"><span class="section-number-4">3.5.7</span> RDT 3.0: Channels with errors and loss</h4>
<div class="outline-text-4" id="text-3-5-7">
<p>
<b>New assumption</b>: underlying channel can also lose packets (data,
ACKs)
</p>
<ul class="org-ul">
<li>checksum, sequence number, ACKs, transmission will be of help
&#x2026; but not enough</li>
</ul>

<p>
<b>Approach</b>: Sender waits reasonable amount of time for ACK
</p>
<ul class="org-ul">
<li>retransmits if no ACK received in this time</li>
<li>if pkt (or ACK) just delayed (not lost)
<ul class="org-ul">
<li>re-transmission will be duplicate, but sequence numbers already
handles this</li>
<li>receiver must specific sequence number of pkt being ACK</li>
</ul></li>
<li>Requires countdown timer</li>
</ul>




<div class="figure">
<p><img src="RDT3.0.png" alt="RDT3.0.png" />
</p>
</div>
</div>
</div>
</div>



<div id="outline-container-org9c9acc1" class="outline-3">
<h3 id="org9c9acc1"><span class="section-number-3">3.6</span> Pipelined Protocols</h3>
<div class="outline-text-3" id="text-3-6">

<div class="figure">
<p><img src="../img/pipelined_protocols.png" alt="pipelined_protocols.png" />
</p>
</div>
</div>

<div id="outline-container-orgc5a47c4" class="outline-4">
<h4 id="orgc5a47c4"><span class="section-number-4">3.6.1</span> Got-back-N</h4>
<div class="outline-text-4" id="text-3-6-1">
<ul class="org-ul">
<li>Sender can have up to N unacked packets in a pipeline</li>
<li>Receiver only sends cumulative ack
<ul class="org-ul">
<li>doesn't ack packet if there is a gap</li>
</ul></li>
<li>Sender has a timer for oldest unacked packet
<ul class="org-ul">
<li>when timer expires, re-transmit all unacked packets</li>
</ul></li>
</ul>

<p>
Packets also carry status tag, sending happens through a window
</p>
</div>
</div>

<div id="outline-container-org8ad88d8" class="outline-4">
<h4 id="org8ad88d8"><span class="section-number-4">3.6.2</span> Selective repeat</h4>
<div class="outline-text-4" id="text-3-6-2">
<ul class="org-ul">
<li>Sender can have up to N unacked packets in a pipeline</li>
<li>Receiver sends individual ack for each packet</li>
<li>Sender maintains timer for each packet</li>
<li>When timer expires, re-transmit only that unacked packet</li>
</ul>


<p>
Individual acknowledgements happen on a per packet basis
</p>
</div>
</div>
</div>

<div id="outline-container-org72eca81" class="outline-3">
<h3 id="org72eca81"><span class="section-number-3">3.7</span> TCP</h3>
<div class="outline-text-3" id="text-3-7">
</div>
<div id="outline-container-org778ffc5" class="outline-4">
<h4 id="org778ffc5"><span class="section-number-4">3.7.1</span> Overview</h4>
<div class="outline-text-4" id="text-3-7-1">
<p>
A TCP "connection" is not an end-to-end switched circuit. It exists
rather as a logical connection, where common state resides only in the
TCPs in the two communicating end systems. None of the intermediate
network or link layer elements retain any information about the
connection and are in fact "oblivious" that even one exists.
"Multicasting" is not possible as the connection needs to be point to
point as a <b>full duplex service</b>.
</p>

<ul class="org-ul">
<li>RFCs: 737, 1122, 1323, 2018, 2581</li>
<li>Point to point (<b>connection-oriented</b>)
<ul class="org-ul">
<li>one sender, one receiver</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org4e11ab1" class="outline-4">
<h4 id="org4e11ab1"><span class="section-number-4">3.7.2</span> TCP seq Number Acks</h4>
<div class="outline-text-4" id="text-3-7-2">
<p>
Sequence numbers:
</p>
<ul class="org-ul">
<li>byte stream "number" of first byte in segment's data</li>
</ul>

<p>
Acknowledgements:
</p>
<ul class="org-ul">
<li>Seq number of next byte expected from other side</li>
<li>cumulative ACK</li>
</ul>


<div class="figure">
<p><img src="telnetEG.png" alt="telnetEG.png" />
</p>
</div>
</div>
</div>



<div id="outline-container-orgff85374" class="outline-4">
<h4 id="orgff85374"><span class="section-number-4">3.7.3</span> Round Trip Time, Timeout</h4>
<div class="outline-text-4" id="text-3-7-3">
<p>
<b>Q Set?</b>
</p>
<ul class="org-ul">
<li>longer than RTT
<ul class="org-ul">
<li>RTT varies</li>
</ul></li>
<li>too short: premature timeout, unnecessary transmission</li>
<li>too long: show reaction to segment loss</li>
</ul>

<p>
<b>Estimate ?</b>
</p>
<ul class="org-ul">
<li>Sample RTT: measured time from segment transmission until ACK
receipt 
<ul class="org-ul">
<li>ignore transmissions</li>
</ul></li>
<li>sample RTT will vary, want RTT smoother
<ul class="org-ul">
<li>average several recent measurements</li>
</ul></li>
</ul>


<p>
Estimated RTT = ( 1 - &alpha; ) * EstmiatedRTT + &alpha; * SampleRTT
</p>
</div>
</div>

<div id="outline-container-org12003d8" class="outline-4">
<h4 id="org12003d8"><span class="section-number-4">3.7.4</span> Re-transmission</h4>
<div class="outline-text-4" id="text-3-7-4">
<p>
<b>Cumulative Acknowledgement</b> indicates that all packets with a sequence
</p>


<p>
<b>TCP ACK Generation</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">event receiver</th>
<th scope="col" class="org-left">TCT receiver action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">in order all up to</td>
<td class="org-left">delayed ACk, wait up to 500ms for</td>
</tr>

<tr>
<td class="org-left">expected seq # acked</td>
<td class="org-left">for next segment, if none send ack</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">arrived in order</td>
<td class="org-left">immediately send single</td>
</tr>

<tr>
<td class="org-left">one other seq ack pending</td>
<td class="org-left">cumulative ack, acking both</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">in order segs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">out of order GAP detected</td>
<td class="org-left">immediately send duplicate ACK</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">with seq # of expected byte</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">missing segment arrives</td>
<td class="org-left">immediate ACK sent</td>
</tr>
</tbody>
</table>


<p>
<b>Fast Re-transmit</b>
</p>

<p>
In the event of a lost segment in the course of a transfer, this can
lead to a backlog of duplicate ACKs. In order to overcome this problem,
if the sender receives three duplicates ACKs for a segment, it
retransmits this particular segment using <b>fast re-transmit</b> before the
segment's timer has expired.
</p>

<pre class="example">

event: ACK received, with ACK field value of y 
	if(y &gt; SendBase) {
	    sendBase = y
	    if(there are currently any not yet acknowledged segments)
	       start timer
	}

</pre>
</div>
</div>

<div id="outline-container-org2af0000" class="outline-4">
<h4 id="org2af0000"><span class="section-number-4">3.7.5</span> Flow Control</h4>
<div class="outline-text-4" id="text-3-7-5">
<ul class="org-ul">
<li>Receiver controls sender, so sender won't overflow receiver's buffer
by sending too much, too fast</li>
<li>Receiver advertises window space into header of request ack</li>
</ul>
</div>
</div>

<div id="outline-container-org2b22e7a" class="outline-4">
<h4 id="org2b22e7a"><span class="section-number-4">3.7.6</span> Connection Management</h4>
<div class="outline-text-4" id="text-3-7-6">
<ul class="org-ul">
<li>TCP: 3 way handshakes</li>
</ul>


<div class="figure">
<p><img src="connectionManagement.png" alt="connectionManagement.png" />
</p>
</div>



<div class="figure">
<p><img src="TCPclosing.png" alt="TCPclosing.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgbf692df" class="outline-4">
<h4 id="orgbf692df"><span class="section-number-4">3.7.7</span> Principles of Congestion Control</h4>
<div class="outline-text-4" id="text-3-7-7">
<p>
otherwise known as traffic ;-)
</p>

<p>
Another cost of congestion: when packet dropped, any "upstream
transmission capacity used for that packet was wasted!"
</p>

<ul class="org-ul">
<li>Additive increase multiplicative decrease (AIMD)</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfc47ffc" class="outline-2">
<h2 id="orgfc47ffc"><span class="section-number-2">4</span> Network Layer</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgba55a16" class="outline-3">
<h3 id="orgba55a16"><span class="section-number-3">4.1</span> Data Plane</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Transport segments from sending to receiving host</li>
<li>On send side encapsulates segments into datagrams</li>
<li>On receiving side, delivers segments to transport layer</li>
<li>Router examines header Fields in all IP datagrams passing through it</li>
</ul>
</div>

<div id="outline-container-org911ac6e" class="outline-4">
<h4 id="org911ac6e"><span class="section-number-4">4.1.1</span> Forwarding</h4>
<div class="outline-text-4" id="text-4-1-1">
<ul class="org-ul">
<li><b>defn</b> Move packets from routers' input to appropriate router output</li>
<li><b>analogy</b> planning a trip from source to destination</li>
</ul>
</div>
</div>

<div id="outline-container-org5445232" class="outline-4">
<h4 id="org5445232"><span class="section-number-4">4.1.2</span> Routing</h4>
<div class="outline-text-4" id="text-4-1-2">
<ul class="org-ul">
<li><b>defn</b> determine route taken by packets from sources to destination</li>
<li><b>analogy</b> getting through a single intersection</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org45a8408" class="outline-3">
<h3 id="org45a8408"><span class="section-number-3">4.2</span> Control Plane</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">
<pre class="src src-artist">
	       { routing algorithm } -&gt; determines end to end 
					path through network

Control plane -&gt; software-defined networking

..............................................

Data plane       local forwarding table
	     _______________________________
	      header value | output link 
	     --------------|--------------
		   0100    | 3
		   0101    | 2 
		   0111    | 2 
		   1001    | 1

</pre>
</div>
</div>
</div>


<div id="outline-container-org01fe0ee" class="outline-3">
<h3 id="org01fe0ee"><span class="section-number-3">4.3</span> Network Services Model</h3>
<div class="outline-text-3" id="text-4-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Net Arch</th>
<th scope="col" class="org-left">Model</th>
<th scope="col" class="org-left">Bandwidth</th>
<th scope="col" class="org-left">Loss</th>
<th scope="col" class="org-left">Order</th>
<th scope="col" class="org-left">Timing</th>
<th scope="col" class="org-left">Congestion feeback</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">internet</td>
<td class="org-left">best effort</td>
<td class="org-left">none</td>
<td class="org-left">no</td>
<td class="org-left">no</td>
<td class="org-left">no</td>
<td class="org-left">no (inferred via loss)</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">ATM</td>
<td class="org-left">CBR</td>
<td class="org-left">const rate</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">no congestion</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">ATM</td>
<td class="org-left">VBR</td>
<td class="org-left">const rate</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">no congestion</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">ATM</td>
<td class="org-left">ABR</td>
<td class="org-left">grntd. min</td>
<td class="org-left">no</td>
<td class="org-left">yes</td>
<td class="org-left">no</td>
<td class="org-left">yes</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">ATM</td>
<td class="org-left">UBR</td>
<td class="org-left">none</td>
<td class="org-left">no</td>
<td class="org-left">yes</td>
<td class="org-left">no</td>
<td class="org-left">no</td>
</tr>
</tbody>
</table>
</div>


<div id="outline-container-org0d10277" class="outline-4">
<h4 id="org0d10277"><span class="section-number-4">4.3.1</span> Possible service provisions</h4>
<div class="outline-text-4" id="text-4-3-1">
<ul class="org-ul">
<li>guaranteed delivery: packet sent by host will eventually arrive at
destination host</li>
<li>guaranteed delivery with bounded delay: e.g. within 100msec</li>
<li>In-order packet delivery: guarantees that packets arrive at
destination in the order that they were sent</li>
<li>guaranteed</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org99fb0b9" class="outline-3">
<h3 id="org99fb0b9"><span class="section-number-3">4.4</span> Virtual circuit &amp; datagram Network</h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li>Datagram network provides network-layer connectionless service</li>
<li>virtual-circuit network provides network-layer connection service</li>
<li>analogous to TCP/UDP connection-oriented/conectionless transport
layer services, but:
<ul class="org-ul">
<li>Service: host-to-host</li>
<li>No choice: network provides one or the other</li>
<li>Implmentation: in network core</li>
</ul></li>
</ul>
</div>

<div id="outline-container-orgad2e40b" class="outline-4">
<h4 id="orgad2e40b"><span class="section-number-4">4.4.1</span> Virtual circuits</h4>
<div class="outline-text-4" id="text-4-4-1">
<ul class="org-ul">
<li>"Source-to-destination path behaves much like telephone circuit"
<ul class="org-ul">
<li>Performance-wise</li>
<li>Network actions along source-to-dest path</li>
</ul></li>
<li>Call setup, teardown for each call before data can flow</li>
<li>Each packet carries VC identifier (not destination host address)</li>
<li>Every router on source-dest path maintains "state" for each passing connection</li>
<li>Link, router resources (bandwidth, buffers) may be allocated to VC
(dedicated resources = predictable results)</li>
</ul>
</div>
</div>


<div id="outline-container-org50bbb91" class="outline-4">
<h4 id="org50bbb91"><span class="section-number-4">4.4.2</span> Datagram forwarding table</h4>
<div class="outline-text-4" id="text-4-4-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">local forwarding table</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">header value</td>
<td class="org-right">output lnk</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table>


<ul class="org-ul">
<li>4 billion IP addresses so rather than list individual destination
addresses, list range of addresses (aggregate table entries)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgebfc188" class="outline-3">
<h3 id="orgebfc188"><span class="section-number-3">4.5</span> Internet (datagram)</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>Data exchange amoung computers
<ul class="org-ul">
<li>"Elastic" service, no strct timing requirements</li>
</ul></li>
<li>Many link types 
<ul class="org-ul">
<li>different characteristics</li>
<li>uniform service difficult</li>
</ul></li>
<li>"Smart" end systems (computers)
<ul class="org-ul">
<li>can adapt, perform control, error recovery</li>
<li>simple inside network, complexity at "edge"</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org238ac89" class="outline-3">
<h3 id="org238ac89"><span class="section-number-3">4.6</span> ATM (VC)</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>Evolved from telephony</li>
<li>Human conversation:
<ul class="org-ul">
<li>Strict timing, reliability requirements</li>
<li>Need for guaranteed service</li>
</ul></li>
<li>"Dumb" end systems
<ul class="org-ul">
<li>Telephones</li>
<li>Complexity inside network</li>
</ul></li>
</ul>
</div>
</div>


<div id="outline-container-org7b4f84f" class="outline-3">
<h3 id="org7b4f84f"><span class="section-number-3">4.7</span> Router Architecture Overview</h3>
<div class="outline-text-3" id="text-4-7">

<div class="figure">
<p><img src="../img/routerArchitecture.png" alt="routerArchitecture.png" />
</p>
</div>

<p>
Two key functions:
</p>
<ul class="org-ul">
<li>Forwarding datagrams from incoming to outgoing link</li>
<li>Run routing algorithms/protocol (RIP, OSPF, BGP)</li>
</ul>
</div>


<div id="outline-container-orgf0dc5ad" class="outline-4">
<h4 id="orgf0dc5ad"><span class="section-number-4">4.7.1</span> Input port functions</h4>
<div class="outline-text-4" id="text-4-7-1">

<div class="figure">
<p><img src="../img/inputPortFunctions.png" alt="inputPortFunctions.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org20dd4c7" class="outline-4">
<h4 id="org20dd4c7"><span class="section-number-4">4.7.2</span> Head-of-the-line (HOC) blocking</h4>
<div class="outline-text-4" id="text-4-7-2">

<div class="figure">
<p><img src="../img/hocBlocking.png" alt="hocBlocking.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org2e30ed6" class="outline-4">
<h4 id="org2e30ed6"><span class="section-number-4">4.7.3</span> Switching Fabric</h4>
<div class="outline-text-4" id="text-4-7-3">

<div class="figure">
<p><img src="../img/switchingFabric.png" alt="switchingFabric.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgcc94977" class="outline-4">
<h4 id="orgcc94977"><span class="section-number-4">4.7.4</span> Output Ports</h4>
<div class="outline-text-4" id="text-4-7-4">

<div class="figure">
<p><img src="../img/outputPorts.png" alt="outputPorts.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd30a082" class="outline-3">
<h3 id="orgd30a082"><span class="section-number-3">4.8</span> IP Layer Protocol</h3>
<div class="outline-text-3" id="text-4-8">

<div class="figure">
<p><img src="../img/ipLayerProtocol.png" alt="ipLayerProtocol.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-org85164f4" class="outline-3">
<h3 id="org85164f4"><span class="section-number-3">4.9</span> IP Fragmentation, Reassembly</h3>
<div class="outline-text-3" id="text-4-9">
<p>
Large IP datagram divided ("fragmented") within net
</p>
<ul class="org-ul">
<li>One datagram decomes several datagrams</li>
<li>Reassaembled only at final destination</li>
<li>IP header bits used to identify, order related fragments</li>
</ul>
</div>
</div>

<div id="outline-container-org28c21fd" class="outline-3">
<h3 id="org28c21fd"><span class="section-number-3">4.10</span> IP Addressing</h3>
<div class="outline-text-3" id="text-4-10">
<ul class="org-ul">
<li>IP Address: 32 bit identifier for host, router interface</li>
<li>Interface: connection between host/router and physical link
<ul class="org-ul">
<li>Routers typcially have multiple interfaces</li>
<li>host typically has one or two interfaces (e.g. wired Ethernet,
wireless 802.11)</li>
</ul></li>
<li>IP address associated with each interface</li>
</ul>
</div>
</div>

<div id="outline-container-org867730d" class="outline-3">
<h3 id="org867730d"><span class="section-number-3">4.11</span> Subnets</h3>
<div class="outline-text-3" id="text-4-11">

<div class="figure">
<p><img src="../img/subnetsIP.png" alt="subnetsIP.png" />
</p>
</div>

<ul class="org-ul">
<li>Subnet? 
<ul class="org-ul">
<li>Device interfaces with same subnet port of IP address</li>
<li>Can physically reach out to each other without intervening router</li>
</ul></li>
<li>IP Address 
<ul class="org-ul">
<li>Subnet port: high order bits</li>
<li>host port: low order bits</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org841cdb2" class="outline-4">
<h4 id="org841cdb2"><span class="section-number-4">4.11.1</span> Bit distribution and max num Computers</h4>
<div class="outline-text-4" id="text-4-11-1">
<p>
On the subnet: 23.1.1.0/24 the last 8 bits are used to ID the computer 
</p>

<p>
2<sup>8</sup> = 256 
0 =&gt; ID Network
255 =&gt; ID Broadcast
</p>

<p>
Max of 254 computers on a subnet
</p>
</div>
</div>

<div id="outline-container-orgba16c3c" class="outline-4">
<h4 id="orgba16c3c"><span class="section-number-4">4.11.2</span> CIDR (RFC 1918)</h4>
<div class="outline-text-4" id="text-4-11-2">
<p>
Classless InterDomainRouting
</p>
<ul class="org-ul">
<li>Subnet portion of address of arbitrary length</li>
<li>Address format <i>a.b.c.d/c</i> , where <i>x</i> is the number of bits in
subnet portion of address</li>
</ul>


<div class="figure">
<p><img src="../img/cidr.png" alt="cidr.png" />
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-orgc68570b" class="outline-3">
<h3 id="orgc68570b"><span class="section-number-3">4.12</span> How to get IP</h3>
<div class="outline-text-3" id="text-4-12">
</div>
<div id="outline-container-org92eefea" class="outline-4">
<h4 id="org92eefea"><span class="section-number-4">4.12.1</span> Host</h4>
<div class="outline-text-4" id="text-4-12-1">
<ul class="org-ul">
<li>can hard code via system files 
<ul class="org-ul">
<li>windows: control-panel &rarr; network &rarr;
configuration &rarr; tcp/ip &rarr; properties</li>
<li>unix: /etc/rc.config</li>
</ul></li>

<li>Assigned by DHCP (Dynamic Host Configuration Protocol)
<ul class="org-ul">
<li>"Plug &amp; Play"</li>
</ul></li>
</ul>

<p>
DHCP can return more than just allocated IP address on subnet:
</p>
<ul class="org-ul">
<li>Address of first-hop router for client</li>
<li>name and IP address of DNS server</li>
<li>Network mask (indicating network versus host portion of address)</li>
</ul>
</div>
</div>


<div id="outline-container-orgaee1bdb" class="outline-4">
<h4 id="orgaee1bdb"><span class="section-number-4">4.12.2</span> Network</h4>
<div class="outline-text-4" id="text-4-12-2">
<p>
Q. How does network get subnet part of IP address?
</p>

<p>
A. Gets allocated portion of its provider's ISP address space
</p>

<p>
Basically, the ISP's IP is chunked into a large enough block that
anything being sent through the internet will be associated with a
specific "IP address range", i.e. the whole 32 bits will note have to
be constrantly re-read
</p>

<p>
ISP receives block from 
</p>

<p>
ICANN (icann.org)
</p>
<ul class="org-ul">
<li>allocated addresses</li>
<li>manages DNS</li>
<li>assignes domain names, resolves disputes</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb3b8560" class="outline-3">
<h3 id="orgb3b8560"><span class="section-number-3">4.13</span> NAT: Network Address Translation</h3>
<div class="outline-text-3" id="text-4-13">
<ul class="org-ul">
<li>Problem: not enough IP addresses</li>
<li>Private internet addresses</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">class</th>
<th scope="col" class="org-left">block</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">A</td>
<td class="org-left">10.0.0/8</td>
</tr>

<tr>
<td class="org-left">B</td>
<td class="org-left">172.16.0.0/12</td>
</tr>

<tr>
<td class="org-left">C</td>
<td class="org-left">192.168.0.9/16</td>
</tr>
</tbody>
</table>

<p>
Basically, a router will map a pricate IP to a public one
</p>


<div class="figure">
<p><img src="../img/routerIPMap.png" alt="routerIPMap.png" />
</p>
</div>

<p>
Local network uses just one IP address as far as the outside world is
concerned:
</p>
<ul class="org-ul">
<li>Range of addresses not needed from ISP just one IP address for all devices</li>
<li>Can change addresses of devices in local network without notifying
outside world</li>
<li>can change ISP without changing addresses of devices in local network</li>
<li>Devices inside local net not explicitly addressable, visible by
outside world (a security plus)</li>
</ul>
</div>
</div>

<div id="outline-container-orgff38a51" class="outline-3">
<h3 id="orgff38a51"><span class="section-number-3">4.14</span> Routing Algorithms</h3>
<div class="outline-text-3" id="text-4-14">
<ul class="org-ul">
<li>Algorithm responsible for maintaining the path that the datagram
travels through the network</li>
<li>Forwarding takes packet coming into incoming port, processes it,
does the lookup on the destination and forwards it to the router</li>
</ul>
</div>

<div id="outline-container-org03cf7ac" class="outline-4">
<h4 id="org03cf7ac"><span class="section-number-4">4.14.1</span> Graph Abstraction</h4>
<div class="outline-text-4" id="text-4-14-1">

<div class="figure">
<p><img src="../img/graphAbstraction.png" alt="graphAbstraction.png" />
</p>
</div>

<ul class="org-ul">
<li>C( x, x<sup>1</sup> ) = const of link ( x, x<sup>1</sup> ) e.g.: c( w, z ) = 5</li>
<li>cost could always be 1, or inversely related to bandwidth, or
inversely related to congestion</li>
<li>Cost of path ( x<sub>1</sub> , x<sub>2</sub> , &#x2026; , x<sub>p</sub> ) = c( x<sub>1</sub> , x<sub>2</sub> ) + c( x<sub>2</sub> ,
x<sub>3</sub> ) + &#x2026; + c( x<sub>p</sub>-1 , x<sub>p</sub> )</li>

<li>Key question: what is the least-cost path between u and z?</li>

<li>Routing algorithm: algorithm that finds that least cost path</li>
</ul>
</div>
</div>

<div id="outline-container-org3d9b460" class="outline-4">
<h4 id="org3d9b460"><span class="section-number-4">4.14.2</span> Routing Algorithm Classification</h4>
<div class="outline-text-4" id="text-4-14-2">
<p>
Global or decentralized information?
</p>

<p>
<b>Global:</b>
</p>
<ul class="org-ul">
<li>All routers have complete topology, link cost info</li>
<li>"Link state" algorithms</li>
</ul>

<p>
<b>Decentralized</b>
</p>
<ul class="org-ul">
<li>Router knows physically-connected neighbors, link cost to neighbors</li>
<li>Iterative process of computation, exchange of info with neighbors</li>
<li>"Distance vector" algorithms</li>
</ul>

<p>
<b>Q.</b> <i>Static or Dynamic?</i>
</p>

<p>
<b>Static</b>
</p>
<ul class="org-ul">
<li>Routes change slowly over time</li>
</ul>

<p>
<b>Dynamic</b>
</p>
<ul class="org-ul">
<li>Routes change more quickly
<ul class="org-ul">
<li>Periodic update in response to link cost changes</li>
<li>Global</li>
<li>Decentralized</li>
<li>Static</li>
<li>Dynamic</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org79f84d0" class="outline-4">
<h4 id="org79f84d0"><span class="section-number-4">4.14.3</span> Link State: Dijkstra's Algorithm</h4>
<div class="outline-text-4" id="text-4-14-3">

<div class="figure">
<p><img src="../img/dijkstraAlg.png" alt="dijkstraAlg.png" />
</p>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">D(v)</th>
<th scope="col" class="org-left">D(w)</th>
<th scope="col" class="org-left">D(x)</th>
<th scope="col" class="org-left">D(y)</th>
<th scope="col" class="org-left">D(z)</th>
</tr>

<tr>
<th scope="col" class="org-right">Step</th>
<th scope="col" class="org-left">N'</th>
<th scope="col" class="org-left">p(v)</th>
<th scope="col" class="org-left">p(w)</th>
<th scope="col" class="org-left">p(x)</th>
<th scope="col" class="org-left">p(y)</th>
<th scope="col" class="org-left">p(z)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-left">u</td>
<td class="org-left">7,u</td>
<td class="org-left"><b>3,u</b></td>
<td class="org-left">5,u</td>
<td class="org-left">\bowtie</td>
<td class="org-left">\bowtie</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">uw</td>
<td class="org-left">6,w</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>5,u</b></td>
<td class="org-left">11,w</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">uwx</td>
<td class="org-left"><b>6,w</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">11,w</td>
<td class="org-left">14,x</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">uwxz</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>10,v</b></td>
<td class="org-left">14,x</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">uwxvy</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>12,y</b></td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">uwxvyz</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Notes</b>
</p>
<ul class="org-ul">
<li>Construct shortest path by tracing predecessor nodes</li>
<li>Ties can exist (can be broken arbitrarily)</li>
</ul>

<p>
<b>Resuslting shortest-path tree from u:</b>
<img src="../img/resultShortPath.png" alt="resultShortPath.png" />
</p>

<p>
Resulting forwarding table in u:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">destination</th>
<th scope="col" class="org-left">link</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">v</td>
<td class="org-left">(u.v)</td>
</tr>

<tr>
<td class="org-left">x</td>
<td class="org-left">(u.x)</td>
</tr>

<tr>
<td class="org-left">y</td>
<td class="org-left">(u.x)</td>
</tr>

<tr>
<td class="org-left">w</td>
<td class="org-left">(u.x)</td>
</tr>

<tr>
<td class="org-left">z</td>
<td class="org-left">(u.x)</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org129a89d" class="outline-4">
<h4 id="org129a89d"><span class="section-number-4">4.14.4</span> Bellman-Ford (Distance Vector Algorithm)</h4>
<div class="outline-text-4" id="text-4-14-4">

<div class="figure">
<p><img src="../img/graphAbstraction.png" alt="graphAbstraction.png" />
</p>
</div>

<ul class="org-ul">
<li>Clearly, dv(z) = 5, dx(z) = 3, dw(z) = 3</li>
<li>B-F equation says: d<sub>u</sub> (z) = min { c(u, x) + dv(z), c(u, x) + dx(z),
c(u,w) + dw(z) } = min { 2 + 5 , 1 + 3 , 5 + 3 } = 4</li>
<li>From time-to-time, each node sends its own distance vector estimate
to neighbors</li>
<li>When x receives new DV estimate from neighbor, it updates its own DV
using B-F equation: D<sub>x</sub> (y) &larr; min<sub>v</sub> { c(x, v) + D<sub>v</sub>(y) }
for each node y &Epsilon; N</li>
<li>Under minor, natural conditions, the estimate Dx(y) converge to the
actual least cost dx(y)</li>
</ul>
</div>
</div>


<div id="outline-container-orga6f3ea1" class="outline-4">
<h4 id="orga6f3ea1"><span class="section-number-4">4.14.5</span> Comparison of LS &amp; DV Algorithms</h4>
<div class="outline-text-4" id="text-4-14-5">
<p>
<b>Message Complexity</b>
</p>
<ul class="org-ul">
<li>LS: With n nodes, E links, O(nE) msgs sent</li>
<li>DV: Exchange between neighbors only 
<ul class="org-ul">
<li>Convergence time varies</li>
</ul></li>
</ul>

<p>
<b>Robustness</b> What happens if router malfunctions?
</p>
<ul class="org-ul">
<li>LS: 
<ul class="org-ul">
<li>Node can advertise incorrect <i>link cost</i></li>
<li>Each node computes only its own table</li>
</ul></li>

<li>DV:
<ul class="org-ul">
<li>DV node can advertise incorrect <i>path cost</i></li>
<li>Each node's table used by others error propagates through network</li>
</ul></li>
</ul>

<p>
<b>Domain</b>
</p>
<ul class="org-ul">
<li>DV =&gt; local networks</li>
<li>LS =&gt; Global networks</li>
</ul>

<p>
<b>Speed of convergence</b>
</p>
<ul class="org-ul">
<li>LS: O(n2) algorithm requires O(nE) msgs
<ul class="org-ul">
<li>may have oscillations</li>
</ul></li>
<li>DV: convergence time varies
<ul class="org-ul">
<li>may be routing loops</li>
<li>count-to-infinity problem</li>
</ul></li>
</ul>

<p>
<b>Hierarchical Routing</b>
</p>
<ul class="org-ul">
<li>Routing study so far - idealization</li>
<li>All routers identical</li>
<li>Network "flat"</li>
</ul>
<p>
&#x2026; Not true in practice!
</p>

<p>
Scale: with 600 million destinations:
</p>
<ul class="org-ul">
<li>Can't store all destinations in routing tables</li>
<li>Routing table exchange would swamp links</li>
</ul>

<p>
Administrative autonomy
</p>
<ul class="org-ul">
<li>Internet = network of networkds</li>
<li>Each network admin may want to control routing in its own network</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org2a69215" class="outline-3">
<h3 id="org2a69215"><span class="section-number-3">4.15</span> Routing in the Internet</h3>
<div class="outline-text-3" id="text-4-15">
</div>
<div id="outline-container-org3dd3fc9" class="outline-4">
<h4 id="org3dd3fc9"><span class="section-number-4">4.15.1</span> Autonomous systems</h4>
<div class="outline-text-4" id="text-4-15-1">
<ul class="org-ul">
<li>Aggregate routers into regions <i>"Autonomous Systems" (AS)</i></li>

<li>Routers in some AS run some routing protocol
<ul class="org-ul">
<li><i>"intra-AS" routing</i> protocol</li>

<li>Routers in different AS can be different intra-AS routing protocol</li>
</ul></li>

<li>Gateway router:
<ul class="org-ul">
<li>Routers in different AS can run different intra-AS routing protocol</li>
<li>Has link to router in another AS</li>
</ul></li>
</ul>


<div class="figure">
<p><img src="../img/autonomousSystems.png" alt="autonomousSystems.png" />
</p>
</div>

<ul class="org-ul">
<li>Suppose router in AS1 receives datagram destined outside of AS1</li>
<li>AS1 must:
<ol class="org-ol">
<li>Learn which destinations are reachable through AS2, which through
AS3</li>
<li>Propagate this reachability info to all routers in AS1</li>
</ol></li>
</ul>
</div>
</div>


<div id="outline-container-orgd216793" class="outline-4">
<h4 id="orgd216793"><span class="section-number-4">4.15.2</span> Intra-AS routing</h4>
<div class="outline-text-4" id="text-4-15-2">
<ul class="org-ul">
<li>Also known as interior gateway protocols (IGP)</li>
<li>Most common intra-AS routing protocols:
<ul class="org-ul">
<li>RIP: Routing Information Protocol</li>
<li>OSPF: Open Shortest Path First</li>
<li>IGRP: Interior Gateway Routing Protocol (Cisco Proprietary)</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgbbc5b72" class="outline-4">
<h4 id="orgbbc5b72"><span class="section-number-4">4.15.3</span> RIP (Routing Information Protocol)</h4>
<div class="outline-text-4" id="text-4-15-3">
<ul class="org-ul">
<li>Included in BSD-Linux distribution in 1982</li>
<li>Distance vector algorithm
<ul class="org-ul">
<li>distance metric: number of hops ( max = 15 hops), each link has
cost 1</li>
<li>DVs exchanged with neighbors every 30 seconds in response message
(aka advertisement)</li>
<li>Each advertisement: lists up to 25 destination subnets (in IP
addressing sense)</li>
</ul></li>

<li>If no advertisement heard after 180 seconds, neighbor link declared
dead
<ul class="org-ul">
<li>Routes via neighbor invalidated</li>

<li>new advertisements sent to neighbors</li>

<li>neighboers in turn send out new advertisements (if tables changed)</li>
</ul></li>
<li>Link failure info quickly propagates to entire net</li>
<li>Poison reverse used to precent ping-pong loops (infinite distance =
16 hops)</li>
</ul>
</div>
</div>

<div id="outline-container-org7dca703" class="outline-4">
<h4 id="org7dca703"><span class="section-number-4">4.15.4</span> Open Shortest Path First</h4>
<div class="outline-text-4" id="text-4-15-4">
<ul class="org-ul">
<li>"Open" source</li>
<li>Uses link state algorithm
<ul class="org-ul">
<li>LS packet dissemination</li>
<li>Topology map at each node</li>
<li>Route computation using Dijkstra's algorithm</li>
</ul></li>
<li>OSPF advertisement carries one entry per neighbor</li>
<li>Advertisements flooded to entire AS 
<ul class="org-ul">
<li>Carried in OSPF message directly over IP (rather than TCP or UDP)</li>
</ul></li>
<li>Security: all OSPF messages authenticated (to prevent malicious intrusion)</li>
<li>Multiple some-cost paths allowed (only one in RIP)</li>
<li>For each link, multiple cost metrics for different ToS (e.g.:
satellite link cost set "low" for best effore ToS; high for real
time ToS</li>
<li>Integrated uni and multicast support 
<ul class="org-ul">
<li>Multicast OSPF (MOSPF) uses some topology database as OSPF</li>
</ul></li>
<li>Hierarchical OSPF in large domains</li>
</ul>
</div>
</div>


<div id="outline-container-orgbb229d7" class="outline-4">
<h4 id="orgbb229d7"><span class="section-number-4">4.15.5</span> Hierarchical OSPF</h4>
<div class="outline-text-4" id="text-4-15-5">

<div class="figure">
<p><img src="../img/ospf.png" alt="ospf.png" />
</p>
</div>

<ul class="org-ul">
<li>Two-level hierarchy: local area, backbone
<ul class="org-ul">
<li>Link-state advertisements only in area</li>
<li>Each node has detailed area topology; only know direction
(shortest path) to nets in other areas</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org055d5b6" class="outline-4">
<h4 id="org055d5b6"><span class="section-number-4">4.15.6</span> Border Gateway Protocol (BGP)</h4>
<div class="outline-text-4" id="text-4-15-6">
<ul class="org-ul">
<li>De Facto inter-domain routing protocol 
<ul class="org-ul">
<li>"glue that holds the internet together"</li>
</ul></li>

<li>BGP provides each AS a means to:
<ul class="org-ul">
<li>eBGP: obtain subnet reachability information from neighboring ASs</li>
<li>iBGP: propagate reachability information to all AS-internal routers</li>
<li>Determins "good" routes to other networks based on reachability
information and policy</li>
</ul></li>
<li>Allows subnet to advertise its existence to rest of internet: "I Am
Here!"</li>
</ul>
</div>
</div>

<div id="outline-container-org99e908a" class="outline-4">
<h4 id="org99e908a"><span class="section-number-4">4.15.7</span> Why different routing?</h4>
<div class="outline-text-4" id="text-4-15-7">

<div class="figure">
<p><img src="../img/bgp.png" alt="bgp.png" />
</p>
</div>

<ul class="org-ul">
<li>A, B, C are provider networks</li>
<li>x, w, y are customer (of provider networks)</li>
<li>x is <i>dual-homed</i>: attached to two networks
<ul class="org-ul">
<li>x does not want to route B via X to C</li>
<li>&#x2026; so x will not advertise to B a route to C</li>
</ul></li>
</ul>

<p>
<b>Policy</b>
</p>
<ul class="org-ul">
<li>Inter-AS: admin wants to control over how its traffic routed, who
routes through its net</li>
<li>intra-AS: single admin, so no policy decisions needed</li>
</ul>

<p>
<b>Scale</b>
</p>
<ul class="org-ul">
<li>hierarchical routing saves table size, reduced update traffic</li>
</ul>

<p>
<b>Performance</b>
</p>
<ul class="org-ul">
<li>intra-AS: can focus on performance</li>
<li>inter-AS: policy may dominate over performance</li>
</ul>
</div>
</div>

<div id="outline-container-org7fff030" class="outline-4">
<h4 id="org7fff030"><span class="section-number-4">4.15.8</span> Broadcast &amp; Multitask routing</h4>
<div class="outline-text-4" id="text-4-15-8">
<ul class="org-ul">
<li>Deliver packets from source to all other nodes</li>
<li>Source duplication is ineffecient</li>
</ul>


<div class="figure">
<p><img src="../img/broadcastMultitask.png" alt="broadcastMultitask.png" />
</p>
</div>

<ul class="org-ul">
<li>Flooding: When node receives broadcast packet, sends copy to all
neighbors
<ul class="org-ul">
<li>Problems: cycles &amp; broadcast storm</li>
</ul></li>
<li>Controlled flooding: node only broadcasts packet if it hasn't
broadcast same packet before
<ul class="org-ul">
<li>Node keeps track of packet ids already broadcasted</li>
<li>Or reverse path forwarding (RPF): only forwarded packet if it
arrived on shortest path between node and source</li>
</ul></li>

<li>Spanning tree:
<ul class="org-ul">
<li>No redundent packets by any node</li>

<li>First construct spanning tree</li>

<li>Nodes then forwarded/make copies only along spanning tree</li>
</ul></li>
</ul>


<div class="figure">
<p><img src="../img/spanningTree.png" alt="spanningTree.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org6e5c824" class="outline-4">
<h4 id="org6e5c824"><span class="section-number-4">4.15.9</span> Multicast routing</h4>
<div class="outline-text-4" id="text-4-15-9">
<ul class="org-ul">
<li>Delivers to multiple but not all computers in the network</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: adam</p>
<p class="date">Created: 2020-10-21 Wed 21:57</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
